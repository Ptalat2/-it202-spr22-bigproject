<head>
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>marking util</title>
  <link rel="manifest" href="/manifest.webmanifest">
  <link href="style.css" rel="stylesheet" type="text/css" />
  <script>
  
  </script>
  <script src="https://unpkg.com/dexie/dist/dexie.js"></script>

  <link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet">
  <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
</head>

<body>
  <ul class="nav-bar">
    <a class="active" href="index.html">Home</a></li>
    <a href="userinput.html">User Inputted Markers</a></li>
    <a href="API.html">API inputted markers</a></li>
    <a href="voice.html">Voice inputted markers</a></li>
    <a href="data.html">data markers</a></li>
  </ul>

  <form>
    <label>Choose school name</label><br>
    <select id="choose">
      <option >school</option>
    <input type="submit" value="Submit" id = "submit">
  </form>

  <div id="map"></div>

  <script
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDa4dMSOASs_iLQnhrPoQ8EZgj2Im_pZ7o&callback=initMap&v=weekly&channel=2"
  async

></script>


<script>
  let map;
  function initMap() {
   
   const myD =  { lat: 41.8696, lng: -87.6496  }
    map = new google.maps.Map(document.getElementById("map"), {
      center: myD,
      zoom: 15,
    });
     marker = new google.maps.Marker({
      position: myD,
      draggable: false,
      animation: google.maps.Animation.DROP,
      map,
      title: "My School" 
    });
    
  }





  let  object;
  var db = new Dexie("SchoolDatabase");
let url1 = "school.json";
fetch(url1).then ((response) => {
return response.json();
}).then(json => {
 console.log(json);
 object =  json["schools"];
 console.log(object);
});
let school;
let lat;
let lon;
let street;

db.version(1).stores({
      Schools: `
        index,
        name,
        street,
        lon,
        lat`,
    });

    for(var i =0; i<object.length; i++) {
      let v = document.querySelector("#choose");
      let opt = document.createElement("option");
      if(typeof object[i]["levels"]["longitude"]!= "undefined" && typeof object[i]["levels"]["latitude"] != "undefined") {
      opt.innerText = object[i]["levels"]["street"];
      v.appendChild(opt);
      let group = { index: i, name: object[i]["name"],street: object[i]["levels"]["street"], lon:object[i]["levels"]["longitude"], lat:object[i]["levels"]["latitude"]};
      db.Schools.bulkPut([group]);
      }
    }


    let get = document.querySelector("#submit");
    get.addEventListener('click', (e) => {
        let val = document.querySelector("#choose").value;
        var DBOpenRequest = window.indexedDB.open("SchoolDatabase", 1);
        var transaction = db.transaction(["SchoolDatabase"], "readwrite");
        var objectStoreRequest = objectStore.get(val);
        let myRecord = objectStoreRequest.result;
        console.log(myRecord);
    });
  
   

</script>

 


</body>


</html>